function Formodel(t){this.form=t.form,this.model=t.model||this.getForm().attr("data-model"),this.attributes=t.attributes,this.rootUrl=t.rootUrl||"",this.tokenKey=t.tokenKey||"_token",this.token=t.token||"",this.handleUpdate=t.handleUpdate||function(){},this.handleStore=t.handleStore||function(){},this.handleDelete=t.handleDelete||function(){},this.handleGet=t.handleGet||function(){},this.handleError=t.handleError||function(){},this.handleBeforeSend=t.handleBeforeSend||function(){},this.handleSuccess=t.handleSuccess||function(){},this.recordId=-1,this.clearAfterStore=t.clearAfterStore||!0,this.clearAfterUpdate=t.clearAfterUpdate||!0,this._init()}Formodel.templates={loading:'<i class="fa fa-spinner faa-spin animated"></i>',success:'<i class="fa fa-eye"></i>',error:'<i class="fa fa-exclamation-triangle"></i>'},Formodel.prototype.getForm=function(){return $("#"+this.form)},Formodel.prototype.getAttributes=function(t){return void 0!==t?this.attributes[t]:this.attributes},Formodel.prototype.getUrl=function(t){return t=t||"",this.getRootUrl()+"/"+this.getModel()+"/"+t},Formodel.prototype.getRootUrl=function(){var t="/"==this.rootUrl.charAt(this.rootUrl.length-1)?1:0;return this.rootUrl.slice(0,this.rootUrl.length-t)},Formodel.prototype.getModel=function(){return this.model},Formodel.prototype.getAjaxData=function(t){var t=t||{};return t[this.tokenKey]=this.token,t},Formodel.prototype.get=function(t){this.recordId=t;var e=this.getAjaxData(),o=this.getUrl(t);this._ajax(o,"GET",e,this.handleGet)},Formodel.prototype.fillWith=function(t){console.log(t);var e=this.getAttributes();for(var o in e)this.fillInput(e[o],o,t[o])},Formodel.prototype.clear=function(){var t=this.getAttributes();for(var e in t)this.fillInput(t[e],e,"")},Formodel.prototype["new"]=function(){this.recordId=-1,this.clear()},Formodel.prototype.fillInput=function(t,e,o){switch(t.toLowerCase()){case"checkbox":case"radio":break;default:var r=t+'[name="'+e+'"]';console.log($(r).val(o.trim()))}},Formodel.prototype.getInputValue=function(t,e){switch(t.toLowerCase()){case"checkbox":case"radio":break;default:var o=t+'[name="'+e+'"]';return $(o).val().trim()}},Formodel.prototype.getFormData=function(){var t={},e=this.getAttributes();for(var o in e){var r=this.getInputValue(e[o],o);t[o]=r}return t},Formodel.prototype.save=function(){console.log(this.getFormData())},Formodel.prototype._init=function(){var t=this;this.getForm().submit(function(e){e.preventDefault(),t.save()})},Formodel.prototype._ajax=function(t,e,o,r){var n=this;$.ajax({url:t,type:e,data:o,beforeSend:function(){n.handleBeforeSend(n)},success:function(t){"GET"==e&&n.fillWith(t),n.handleSuccess(n,t),r(n,t)},error:function(t){n.handleError(n,t)}})};